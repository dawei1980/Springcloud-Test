server:
  port: 8084

spring:
  profiles:
    active: path-route      #配置文件名 和 spring.profiles.active 相对应
  application:
    name: springcloud-gateway
  main:
    allow-bean-definition-overriding: true

  cloud:
    config:
      uri: http://localhost:8082 #config server 端地址
      label: master #git分支
      profile: dev
      discovery:
        enabled: true
        service-id: springcloud-config #config-server服务名称
    bus:
      trace:
        enabled: true
      enabled: true

    gateway:
      discovery:
        locator:
          enabled: true
          # 服务名小写
          lower-case-service-id: true
      routes:
        - id: springcloud-login
          uri: lb://springcloud-login   #代表从注册中心获取服务，且以lb(load-balance)负载均衡方式转发
          predicates:                     #断言
            - Path= /auth/** #匹配路径
          filters:
            - StripPrefix=1 #去除第一个级前缀
            - Custom
            - name: Retry
              args:
                retries: 3
                statuses: BAD_GATEWAY

eureka:
  client:
    service-url:
      #defaultZone 这个是不会提示的，此处需要自己写
      #实际上属性应该是service-url,这个属性是个map（key-value）格式；当key是defaultZone的时候才能被解析；所以这里没有提示，
      #但是自己还需要写一个defaultZone；
      defaultZone: http://localhost:8761/eureka/eureka


#开启端点
management:
  endpoint:
    shutdown:
      enabled: false
  endpoints:
    web:
      exposure:
        include: "*"

#开启端点
#management:
#  endpoints:
#    web:
#      exposure:
#        include: '*'
#  security:
#    enabled: false




